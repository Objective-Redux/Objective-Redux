import { Middleware, AnyAction, Unsubscribe } from 'redux';
import { StateController } from '.';
/**
 * @internal
 */
declare type Reducer<S, A> = (prevState: S, action: A) => S;
/**
 * @internal
 */
export interface SagaFn<Payload> {
    (payload: Payload): any;
}
/**
 * The ReduxRegister handles the connection of controllers, reducers, and sagas to Redux. Each ReduxRegister has its
 * own Redux store that it manages.
 *
 * Middleware can be applied at construction. Sagas and reducers can be added at any time, as needed.
 */
export declare class ReduxRegister {
    private readonly store;
    private readonly sagaMiddleware;
    private registeredReducers;
    private replacedReducer;
    private readonly registeredSagas;
    private readonly storeFns;
    /**
     * Creates an instance of the ReduxRegister.
     *
     * In setting up the instance, the class will create a ReduxStore.
     *
     * @param reducer The initial reducer for the store. This should not include any of the reducers for the controllers.
     * @param initialState The initial state of the store. This should not include the state for any of the controllers.
     * @param middleware Additional middleware to add to the store.
     * @returns An instance of the ReduxRegister.
     * @example
     * ```typescript
     * const register = new ReduxRegister();
     * ```
     */
    constructor(reducer?: Reducer<any, AnyAction> | null, initialState?: any, middleware?: Middleware<any>[]);
    /**
     * Monkey-patch the redux store so that the register can properly partition the store for internal and external use.
     *
     * @returns The original store methods.
     */
    private wrapStore;
    /**
     * Dispatches a Redux action to the store without using a Controller.
     *
     * @param action The action that is to be dispatched via the store.
     * @returns The action that was sent.
     * @example
     * ```typescript
     * const register = new ReduxRegister();
     * register.dispatch(myAction());
     * ```
     */
    dispatch(action: AnyAction): AnyAction;
    /**
     * Subscribes to the Redux store events.
     *
     * @param listener The callback that will be fired.
     * @returns An unsubscribe function that can be called to stop listening.
     * @example
     * ```
     * const register = new ReduxRegister();
     * const unsubscribeFn = register.subscribe(myCallback);
     * ```
     */
    subscribe(listener: () => void): Unsubscribe;
    /**
     * Gets the state object from the Redux store.
     *
     * @returns The state object from Redux.
     * @example
     * ```
     * const register = new ReduxRegister();
     * const state = register.getState();
     * ```
     */
    getState(): any;
    private updateReducers;
    private runSaga;
    /**
     * Adds a state controller to the register. This will add the reducer to the Redux store.
     *
     * This method is not meant to be used directly-- it will be called automatically when a new instance is created.
     *
     * @param controller The controller that is being registered.
     */
    registerStateController(controller: StateController<any>): void;
    /**
     * Replaced the existing reducer with a new one.
     *
     * Note that, by design, this will not affect reducers generated by controllers. Controller reducers are
     * handled separately, which allows other injection mechanisms to use the register without trampling
     * the registers own lazy loading.
     *
     * @param nextReducer The new reducer that will replace the existing reducer.
     */
    replaceReducer(nextReducer: Reducer<any, AnyAction>): void;
    /**
     * Adds and and begins running a saga as part in the context of the store that the register manages.
     *
     * @param sagaFn The saga to add to the register.
     * @example
     * ```typescript
     * function* sagaFn() {
     *   yield console.log('Hello, world!');
     * }
     *
     * const register = new ReduxRegister();
     * register.registerSaga(sagaFn);
     * ```
     */
    registerSaga(sagaFn: SagaFn<void>): void;
}
export {};
//# sourceMappingURL=redux-register.d.ts.map